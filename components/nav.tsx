"use client";

import React from "react";
import { usePathname } from "next/navigation";
import Link from "next/link";

export function PageNav() {
  const pathname = usePathname();
  const isHome = pathname === "/";
  const isWriting = pathname.startsWith("/p");
  const logoTranslate = isHome ? "md:translate-x-28" : "md:translate-x-0";

  return (
    <nav className="flex justify-between pb-2 md:pb-4">
      <div className={`flex-none transition-transform ${logoTranslate}`}>
        <Link href="/" title="Kern.io logo">
          <Logo />
        </Link>
      </div>

      <ul className="flex justify-end">
        <li>
          <NavLink href="/" isSelected={isHome}>
            Home
          </NavLink>
        </li>
        <li>
          <NavLink href="/p" isSelected={isWriting}>
            Writing
          </NavLink>
        </li>
      </ul>
    </nav>
  );
}

function NavLink({
  href,
  isSelected,
  children,
}: {
  href: string;
  isSelected: boolean;
  children: React.ReactNode;
}) {
  return (
    <Link
      href={href}
      className={`block text-sm font-semibold leading-6 py-2 px-4 text-stone-600 hover:text-stone-400 dark:text-stone-300 dark:hover:text-stone-100 underline transition rounded-md ${isSelected ? "bg-stone-50 dark:bg-stone-800" : ""}`}
    >
      {children}
    </Link>
  );
}

function Logo() {
  return (
    <svg
      width="48"
      height="35.5"
      viewBox="0 0 107 79"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className="block"
    >
      <path
        d="M89.8508 33.9238C88.3815 33.9238 87.1868 35.1198 87.1868 36.5891C87.1868 38.0585 88.3815 39.2531 89.8508 39.2531C91.3201 39.2531 92.5148 38.0585 92.5148 36.5891C92.5148 35.1198 91.3201 33.9238 89.8508 33.9238ZM89.8508 45.2465C85.0761 45.2465 81.1935 41.3638 81.1935 36.5891C81.1935 31.8145 85.0761 27.9291 89.8508 27.9291C94.6255 27.9291 98.5081 31.8145 98.5081 36.5891C98.5081 41.3638 94.6255 45.2465 89.8508 45.2465ZM42.4521 6.71179C28.9148 6.71179 16.2561 8.87845 10.1988 12.2345C6.80547 14.1145 6.3748 15.7771 6.34547 16.8625C6.2108 21.9278 6.69481 37.4478 10.5135 48.2745C13.3748 56.3878 18.7495 67.6078 32.3268 71.3385C33.7335 71.7251 37.5735 72.6224 42.8615 72.6224C47.1735 72.6224 53.5135 71.9878 59.2388 68.9651C67.0921 64.8171 72.7388 56.6744 76.0201 44.7691L77.5588 39.1958L81.2268 43.6625C83.3575 46.2558 86.5001 47.7438 89.8508 47.7438C96.0015 47.7438 101.005 42.7398 101.005 36.5891C101.005 30.4371 96.0015 25.4318 89.8508 25.4318C87.6415 25.4318 85.5068 26.0785 83.6748 27.3011L78.6268 30.6731L79.0201 24.6171C79.4921 17.3385 78.9721 15.7518 78.9121 15.5945C77.4601 12.3038 70.8135 10.3798 67.9721 9.55712C60.3841 7.69046 51.5761 6.71179 42.4521 6.71179ZM42.8615 78.6158C38.6241 78.6158 34.2055 78.0704 30.7388 77.1171C14.4521 72.6411 8.16947 59.6504 4.86147 50.2691C0.740136 38.5838 0.210803 22.0758 0.353469 16.7025C0.458803 12.7518 2.7948 9.48645 7.29347 6.99178C14.2788 3.12112 27.7521 0.717117 42.4521 0.717117C52.0521 0.717117 61.3535 1.75579 69.3508 3.72246L69.5681 3.77979C73.5935 4.94379 81.8175 7.32512 84.4028 13.1918C84.8228 14.1478 85.2521 15.8065 85.2055 20.0758C86.7055 19.6545 88.2668 19.4384 89.8508 19.4384C99.3068 19.4384 107 27.1318 107 36.5891C107 46.0451 99.3068 53.7385 89.8508 53.7385C86.4321 53.7385 83.1561 52.7318 80.3815 50.8891C76.4855 61.9238 70.2001 69.9531 62.0361 74.2651C55.2281 77.8611 47.8508 78.6158 42.8615 78.6158Z"
        fill="#BCBCBD"
      />
      <path
        d="M89.8509 42.2495C86.7243 42.2495 84.1896 39.7149 84.1896 36.5882C84.1896 33.4615 86.7243 30.9269 89.8509 30.9269C92.9776 30.9269 95.5123 33.4615 95.5123 36.5882C95.5123 39.7149 92.9776 42.2495 89.8509 42.2495ZM89.8509 22.4362C82.0349 22.4362 75.6976 28.7722 75.6976 36.5882C75.6976 44.4042 82.0349 50.7415 89.8509 50.7415C97.6669 50.7415 104.004 44.4042 104.004 36.5882C104.004 28.7722 97.6669 22.4362 89.8509 22.4362Z"
        fill="white"
      />
      <path
        d="M31.5328 74.2275C37.4355 75.8488 50.2088 77.1248 60.6381 71.6155C75.3608 63.8382 79.7728 45.0662 81.0928 34.5689C81.1128 34.4022 83.1728 17.8355 81.6595 14.3995C79.6381 9.81285 72.3181 7.69552 68.8008 6.67819L68.6368 6.63285C47.0261 1.31952 19.1941 3.82352 8.74746 9.61285C5.19146 11.5835 3.42613 13.9289 3.35013 16.7822C3.21013 22.0022 3.7168 38.0142 7.68746 49.2715C10.7715 58.0195 16.6008 70.1248 31.5328 74.2275Z"
        fill="white"
      />
      <path
        d="M36.4353 43.8067C35.2007 43.8067 35.07 44.2574 35.07 45.1547V47.1961C35.07 47.5507 35.2753 47.7574 35.63 47.7574H37.2407C37.6153 47.7387 37.802 47.5507 37.802 47.1761V45.1547C37.802 44.2574 37.6713 43.8067 36.4353 43.8067Z"
        fill="#EE2A22"
      />
      <path
        d="M52.9651 53.7287H50.1571C49.8584 53.7287 49.6517 53.6154 49.4837 53.3541L47.1624 49.7967C47.0877 49.6861 46.9744 49.6861 46.9011 49.7967L46.1317 50.8474C46.0771 50.9207 46.0584 50.9954 46.0584 51.0887V53.1674C46.0584 53.5221 45.8704 53.7287 45.4957 53.7287H43.3637C43.0064 53.7287 42.8011 53.5221 42.8011 53.1674V41.1861C42.8011 40.8114 43.0064 40.6247 43.3637 40.6247H45.4957C45.8704 40.6247 46.0584 40.8114 46.0584 41.1861V44.9501C46.0584 45.1354 46.1891 45.1741 46.2824 45.0247L49.2211 40.9821C49.3904 40.7381 49.5957 40.6247 49.8957 40.6247H52.6664C53.1331 40.6247 53.2837 40.9247 53.0211 41.3167L49.2397 46.5207C49.1837 46.6141 49.1664 46.6901 49.2397 46.7847L53.3197 53.0554C53.5837 53.4287 53.4144 53.7287 52.9651 53.7287ZM41.0224 53.0927C41.0224 53.5047 40.8357 53.7287 40.4611 53.7287H38.3637C38.0077 53.7287 37.8024 53.5421 37.8024 53.1674V51.5394C37.8024 51.1647 37.6144 50.9781 37.2397 50.9781H35.6304C35.2757 50.9781 35.0691 51.1647 35.0691 51.5394V53.1674C35.0691 53.5421 34.8824 53.7287 34.5077 53.7287H32.4104C32.0544 53.7287 31.8491 53.5047 31.8491 53.0927V45.1554C31.8491 42.7967 32.2237 40.2887 36.4357 40.2887C40.6477 40.2887 41.0224 42.7967 41.0224 45.1554V53.0927ZM25.7211 57.7061H59.5731V36.3114H25.7211V57.7061Z"
        fill="#EE2A22"
      />
      <path
        d="M68.0596 6.58192C82.5596 10.4793 83.0103 16.8846 69.0663 20.8886C55.1223 24.8913 32.0636 24.9766 17.5636 21.0793C3.0636 17.1819 2.61293 10.7766 16.5569 6.77392C30.5009 2.76992 53.5596 2.68459 68.0596 6.58192Z"
        fill="#E9E9E9"
      />
      <mask
        id="mask0_2002_93"
        maskUnits="userSpaceOnUse"
        x="6"
        y="3"
        width="74"
        height="21"
      >
        <path
          d="M16.5573 6.77335C2.61333 10.776 3.064 17.1813 17.564 21.0787C32.064 24.9773 55.1227 24.892 69.0667 20.888C83.0107 16.884 82.56 10.48 68.06 6.58268C60.936 4.66801 51.7467 3.71336 42.588 3.71336C33.104 3.71336 23.6507 4.73602 16.5573 6.77335Z"
          fill="white"
        />
      </mask>
      <g mask="url(#mask0_2002_93)">
        <path
          d="M77.4672 16.7255C77.4672 22.1401 61.9925 26.5281 42.9045 26.5281C23.8165 26.5281 8.34187 22.1401 8.34187 16.7255C8.34187 11.3121 23.8165 6.9228 42.9045 6.9228C61.9925 6.9228 77.4672 11.3121 77.4672 16.7255Z"
          fill="#B97732"
        />
        <path
          d="M45.0197 25.5294C29.7957 25.5294 18.6704 21.8747 18.6704 18.2867C18.6704 14.6987 34.8264 14.9827 34.8264 14.74C34.8264 14.4987 29.5771 13.8814 29.5771 11.46C29.5771 9.03736 30.9917 8.29602 45.2277 8.29602C59.4637 8.29602 74.7411 12.0427 74.7411 19.16C74.7411 26.2787 73.5197 22.5294 71.8691 23.4067C71.8691 23.4067 60.2437 25.5294 45.0197 25.5294Z"
          fill="#DEBA6F"
        />
        <path
          d="M46.6848 22.1577C41.8541 22.1577 31.7781 20.6791 31.7781 18.2137C31.7781 15.7471 44.3808 17.3977 44.3808 17.0311C44.3808 16.6631 39.3141 16.2004 39.3141 14.2471C39.3141 12.2924 47.8088 12.6257 48.5168 12.6257C49.2235 12.6257 59.2555 12.7497 59.2555 17.5377C59.2555 22.3244 51.5155 22.1577 46.6848 22.1577Z"
          fill="#FDFCFB"
        />
      </g>
    </svg>
  );
}
